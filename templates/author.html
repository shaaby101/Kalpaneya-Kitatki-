{% extends "layout.html" %}
{% block title %}{{ author.name_english }} - Kannada Library{% endblock %}
{% block content %}
    <div class="author-header">
        <h1>{{ author.name_kannada }}</h1>
        <h2>{{ author.name_english }}</h2>
        {% if author.era %}
            <p class="author-era">Era: {{ author.era }}</p>
        {% endif %}
        {% if author.biography %}
            <p class="author-bio">{{ author.biography }}</p>
        {% endif %}
    </div>

    <div class="works-list">
        <h3>ಕೃತಿಗಳು (Works)</h3>
        {% if works %}
            <div class="work-grid">
                {% for work in works %}
                    <a href="{{ url_for('work_details', work_id=work.work_id) }}" class="work-card">
                        <div class="work-poster">
                            {% if work.author_image_url and work.author_image_url.strip() %}
                                <img 
                                    src="{{ url_for('static', filename='images/' + work.author_image_url) }}" 
                                    alt="Portrait of {{ author.name_english }}"
                                    loading="lazy"
                                    onerror="this.src='https://placehold.co/500x750/f5f2eb/6b6b6b?text={{ work.title_english|urlencode }}'"
                                >
                            {% elif work.cover_image_url and work.cover_image_url.strip() %}
                                <img 
                                    src="{{ url_for('static', filename='images/' + work.cover_image_url) }}" 
                                    alt="Cover for {{ work.title_english }}"
                                    loading="lazy"
                                >
                            {% else %}
                                <img 
                                    src="https://placehold.co/500x750/f5f2eb/6b6b6b?text={{ work.title_english|urlencode }}" 
                                    alt="Cover for {{ work.title_english }}"
                                    loading="lazy"
                                >
                            {% endif %}
                        </div>
                        <div class="work-details">
                            <h3 class="work-title">{{ work.title_kannada }}</h3>
                            <p class="work-author">{{ work.title_english }}</p>
                            <p class="work-type">Type: {{ work.type }}</p>
                        </div>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <p>No works available for this author.</p>
        {% endif %}
    </div>
{% endblock %}
